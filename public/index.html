<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FortiFi Security Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Login Page -->
    <div id="login-page" class="login-container">
        <div class="login-box">
            <img src="./Assets/logo2.png" alt="Company Logo" class="login-logo">
            
            <h2 class="login-title">FortiFi Dashboard</h2>
            
            <div class="login-tabs">
                <div class="login-tab active" data-tab="login">Login</div>
                <div class="login-tab" data-tab="register">Register</div>
            </div>
            
            <!-- Login Form -->
            <form id="login-form" class="login-form active">
                <div class="input-group">
                    <label for="login-username">Username</label>
                    <input type="text" id="login-username" placeholder="Enter username" required>
                </div>
                <div class="input-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="Enter password" required>
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                <div id="login-error" class="error-message"></div>
            </form>
            
            <!-- Registration Form -->
            <form id="register-form" class="login-form">
                <!-- Registration fields here -->
            </form>
        </div>
    </div>
          


    <!-- Main Dashboard -->
    <div id="main-dashboard" class="hidden">
        <!-- Sidebar -->
        <div class="sidebar">
            <i class="fas fa-home sidebar-icon active" title="Dashboard" data-page="dashboard"></i>
            <i class="fas fa-laptop sidebar-icon" title="Devices" data-page="devices"></i>
            <i class="fas fa-bell sidebar-icon" title="Alerts" data-page="alerts"></i>
            <i class="fas fa-cog sidebar-icon" title="Settings" data-page="settings"></i>
        </div>

        <!-- Dashboard Page -->
        <div class="main-content" id="dashboard-page">
            <h1><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h1>
            
            <div class="summary-cards">
                <div class="card">
                    <h3><i class="fas fa-laptop"></i> Devices</h3>
                    <p>Total: <span id="total-devices">5</span></p>
                    <p>Active: <span id="active-devices">4</span></p>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-bell"></i> Alerts</h3>
                    <p>Active: <span id="active-alerts">2</span></p>
                    <p>Last 24h: <span id="daily-alerts">5</span></p>
                </div>
            </div>
        </div>

        <!-- Devices Page -->
        <div class="main-content hidden" id="devices-page">
            <h1><i class="fas fa-laptop"></i> Managed Devices</h1>
            <div class="device-controls">
                <button class="btn-silence" id="refresh-devices">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            <div class="device-grid" id="device-container">
                <!-- Devices will be populated here -->
            </div>
        </div>

       <!-- Alerts Section (update this part) -->
    <div class="main-content hidden" id="alerts-page">
      <h1>Security Alerts</h1>
      <div class="alert-controls">
        <div class="alert-filters">
            <select id="alert-severity">
                <option value="all">All Severities</option>
                <option value="critical">Critical</option>
                <option value="high">High</option>
                <option value="medium">Medium</option>
            </select>
            <select id="alert-protocol">
                <option value="all">All Protocols</option>
                <option value="http">HTTP</option>
                <option value="https">HTTPS</option>
                <option value="ssh">SSH</option>
                <option value="ftp">FTP</option>
                <option value="tcp">TCP</option>
                <option value="udp">UDP</option>
            </select>
            <select id="alert-timeframe">
                <option value="all">All Time</option>
                <option value="24h">Last 24 Hours</option>
                <option value="7d">Last 7 Days</option>
            </select>
        </div>
        <button class="btn-refresh" onclick="loadAlertsFromLog()">
            <i class="fas fa-sync-alt"></i> Refresh
        </button>
    </div>
      
      <table class="alert-table">
          <thead>
              <tr>
                  <th>Timestamp</th>
                  <th>Severity</th>
                  <th>Source IP</th>
                  <th>Protocol</th>
                  <th>Description</th>
              </tr>
          </thead>
          <tbody id="alert-list">
              <!-- Alerts will load here -->
          </tbody>
      </table>
  </div>

  
</body>
</html>

<!-- Add this style to your CSS or in a style tag -->
<style>
    /* Severity badges */
    .severity-critical {
        background-color: #e74c3c;
        color: white;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
    }
    
    .severity-high {
        background-color: #e67e22;
        color: white;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
    }
    
    .severity-medium {
        background-color: #f1c40f;
        color: white;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
    }
    
    /* Alert table styling */
    .alert-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    
    .alert-table th {
        background-color: #3498db;
        color: white;
        padding: 12px;
        text-align: left;
    }
    
    .alert-table td {
        padding: 10px 12px;
        border-bottom: 1px solid #eee;
    }
    
    .alert-table tr:hover {
        background-color: #f5f5f5;
    }
</style>

<!-- Simple filter functionality -->
<script>
    // Simple filter function for testing
    function filterTestAlerts() {
        const severity = document.getElementById('alert-severity').value;
        const rows = document.querySelectorAll('#alert-list tr');
        
        rows.forEach(row => {
            const rowSeverity = row.querySelector('span[class^="severity-"]').className;
            const showRow = severity === 'all' || rowSeverity.includes(severity);
            row.style.display = showRow ? '' : 'none';
        });
    }
    
    // Add event listeners to filters
    document.getElementById('alert-severity').addEventListener('change', filterTestAlerts);
    document.getElementById('alert-timeframe').addEventListener('change', filterTestAlerts);
    
    // Mock silence function
    function silenceAlerts() {
        alert("Notifications silenced for 1 hour (test mode)");
    }
    
    // Update dashboard counters
    document.getElementById('active-alerts').textContent = '5';
    document.getElementById('daily-alerts').textContent = '3';
</script>

        <!-- Settings Page -->
        <div class="main-content hidden" id="settings-page">
            <h1><i class="fas fa-cog"></i> System Settings</h1>
            <div class="settings-section">
                <h3><i class="fas fa-user"></i> User Preferences</h3>
                <div class="setting-item">
                    <label>Theme:</label>
                    <select id="theme-selector">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label>Notifications:</label>
                    <input type="checkbox" id="notifications-toggle" checked>
                </div>
                <button id="save-settings" class="btn-save"><i class="fas fa-save"></i> Save Settings</button>
                <button id="logout-btn" class="btn-logout"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const elements = {
            loginPage: document.getElementById('login-page'),
            mainDashboard: document.getElementById('main-dashboard'),
            loginForm: document.getElementById('login-form'),
            sidebarIcons: document.querySelectorAll('.sidebar-icon'),
            logoutBtn: document.getElementById('logout-btn'),
            refreshDevicesBtn: document.getElementById('refresh-devices'),
            silenceAlertsBtn: document.getElementById('silence-alerts'),
            saveSettingsBtn: document.getElementById('save-settings')
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            // Check if user is already logged in
            if (localStorage.getItem('authToken')) {
                elements.loginPage.classList.add('hidden');
                elements.mainDashboard.classList.remove('hidden');
            }

            // Login form submission
            elements.loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                // Simple authentication (replace with real auth)
                if (username && password) {
                    localStorage.setItem('authToken', 'dummy-token');
                    elements.loginPage.classList.add('hidden');
                    elements.mainDashboard.classList.remove('hidden');
                }
            });

            // Sidebar navigation
            elements.sidebarIcons.forEach(icon => {
                icon.addEventListener('click', (e) => {
                    const page = e.target.dataset.page;
                    
                    // Update active icon
                    elements.sidebarIcons.forEach(i => i.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    // Show selected page
                    document.querySelectorAll('.main-content').forEach(el => {
                        el.classList.add('hidden');
                    });
                    document.getElementById(`${page}-page`).classList.remove('hidden');
                });
            });

            // Logout button
            elements.logoutBtn.addEventListener('click', () => {
                localStorage.removeItem('authToken');
                elements.mainDashboard.classList.add('hidden');
                elements.loginPage.classList.remove('hidden');
            });

            // Silence alerts button
            elements.silenceAlertsBtn.addEventListener('click', () => {
                alert('Notifications have been silenced for 1 hour');
            });

            // Save settings button
            elements.saveSettingsBtn.addEventListener('click', () => {
                alert('Settings saved successfully');
            });
        });
    </script>
    <script>
      // User accounts storage
      const users = JSON.parse(localStorage.getItem('fortifi-users')) || {};
      
      // DOM Elements
      const loginPage = document.getElementById('login-page');
      const mainDashboard = document.getElementById('main-dashboard');
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');
      const loginError = document.getElementById('login-error');
      const registerError = document.getElementById('register-error');
      const tabs = document.querySelectorAll('.login-tab');
      const forms = document.querySelectorAll('.login-form');

      // Tab switching
      tabs.forEach(tab => {
          tab.addEventListener('click', () => {
              tabs.forEach(t => t.classList.remove('active'));
              forms.forEach(f => f.classList.remove('active'));
              
              tab.classList.add('active');
              document.getElementById(`${tab.dataset.tab}-form`).classList.add('active');
          });
      });

      // Registration
      registerForm.addEventListener('submit', (e) => {
          e.preventDefault();
          
          const username = document.getElementById('register-username').value;
          const password = document.getElementById('register-password').value;
          const confirmPassword = document.getElementById('confirm-password').value;
          
          // Validation
          if (password !== confirmPassword) {
              registerError.textContent = "Passwords don't match";
              return;
          }
          
          if (users[username]) {
              registerError.textContent = "Username already exists";
              return;
          }
          
          // Store user (in real app, you would hash the password)
          users[username] = { password };
          localStorage.setItem('fortifi-users', JSON.stringify(users));
          
          // Switch to login tab
          tabs[0].click();
          registerError.textContent = "";
          alert("Account created successfully! Please login.");
      });

      // Login
      loginForm.addEventListener('submit', (e) => {
          e.preventDefault();
          
          const username = document.getElementById('login-username').value;
          const password = document.getElementById('login-password').value;
          
          // Check credentials
          if (!users[username] || users[username].password !== password) {
              loginError.textContent = "Invalid username or password";
              return;
          }
          
          // Successful login
          localStorage.setItem('fortifi-auth', username);
          loginPage.classList.add('hidden');
          mainDashboard.classList.remove('hidden');
      });

      // Check if already logged in
      if (localStorage.getItem('fortifi-auth')) {
          loginPage.classList.add('hidden');
          mainDashboard.classList.remove('hidden');
      }

      // Logout functionality (add this to your existing dashboard logout button)
      document.addEventListener('click', (e) => {
          if (e.target.id === 'logout-btn') {
              localStorage.removeItem('fortifi-auth');
              mainDashboard.classList.add('hidden');
              loginPage.classList.remove('hidden');
          }
      });
  </script>

  <!-- Scripts -->
  <script src="/js/router.js"></script>
  <script src="/js/devices.js"></script>
  <script src="/js/alerts.js"></script>  
</body>
</html>